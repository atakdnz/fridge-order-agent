<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SiparisAgent - Fridge Order Test</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>ğŸ§Š SiparisAgent</h1>
            <p data-i18n="subtitle">Fridge Detection & Auto-Order Test</p>
            <div class="lang-picker">
                <button class="lang-btn active" data-lang="en">ğŸ‡ºğŸ‡¸ EN</button>
                <button class="lang-btn" data-lang="tr">ğŸ‡¹ğŸ‡· TR</button>
            </div>
        </header>

        <!-- Upload Zone -->
        <div id="upload-zone" class="upload-zone">
            <div class="upload-content">
                <span class="upload-icon">ğŸ“·</span>
                <h3 data-i18n="drop_image">Drop fridge image here</h3>
                <p data-i18n="click_select">or click to select â€¢ paste from clipboard</p>
                <input type="file" id="file-input" accept="image/*" hidden>
            </div>
        </div>

        <!-- Threshold Slider -->
        <div class="threshold-control">
            <label for="threshold"><span data-i18n="confidence">Detection Confidence:</span> <span
                    id="threshold-value">50%</span></label>
            <input type="range" id="threshold" min="10" max="90" value="50">
        </div>

        <!-- AI Selection Toggle -->
        <div class="ai-control">
            <label class="toggle-label">
                <input type="checkbox" id="use-ai" checked>
                <span class="toggle-slider"></span>
                <span data-i18n="ai_selection">ğŸ¤– AI Product Selection</span>
            </label>
            <select id="preference">
                <option value="smart" data-i18n="pref_smart">ğŸ§  Smart (AI decides)</option>
                <option value="cheapest" data-i18n="pref_cheapest">Cheapest</option>
                <option value="cheapest per unit" data-i18n="pref_unit">Cheapest per unit</option>
                <option value="organic or natural" data-i18n="pref_organic">Organic/Natural</option>
                <option value="popular brand" data-i18n="pref_brand">Popular brand</option>
            </select>
        </div>

        <!-- Custom Instructions (always visible) -->
        <div id="custom-instructions-wrapper" class="custom-instructions">
            <label for="custom-instructions" data-i18n="custom_label">ğŸ“ Additional Instructions (optional):</label>
            <textarea id="custom-instructions"
                placeholder="e.g., I prefer PÄ±nar or SÃ¼taÅŸ brand, avoid products with additives, choose larger sizes..."></textarea>
        </div>

        <!-- Provider Selection -->
        <div class="provider-control">
            <label data-i18n="provider_label">ğŸª Order From:</label>
            <div class="provider-options">
                <label class="provider-option">
                    <input type="radio" name="provider" value="getir" checked>
                    <span class="provider-icon">ğŸš´</span>
                    <span>Getir</span>
                </label>
                <label class="provider-option">
                    <input type="radio" name="provider" value="migros">
                    <span class="provider-icon">ğŸ›’</span>
                    <span>Migros</span>
                </label>
                <label class="provider-option">
                    <input type="radio" name="provider" value="akbal">
                    <span class="provider-icon">ğŸ¬</span>
                    <span>Akbal</span>
                </label>
            </div>
        </div>

        <!-- Preview -->
        <div id="preview-section" class="preview-section hidden">
            <img id="preview-image" src="" alt="Fridge preview">
            <button id="analyze-btn" class="btn btn-primary" data-i18n="analyze_btn">ğŸ” Analyze Fridge</button>
        </div>

        <!-- Results -->
        <div id="results-section" class="results-section hidden">
            <div class="results-grid">
                <div class="result-card detected">
                    <h3 data-i18n="detected_title">âœ… Detected Items</h3>
                    <ul id="detected-list"></ul>
                </div>
                <div class="result-card missing">
                    <h3 data-i18n="missing_title">âŒ Missing Items</h3>
                    <ul id="missing-list"></ul>
                </div>
            </div>

            <!-- Save to History (for testing with custom dates) -->
            <div class="save-history-section">
                <label for="history-date" data-i18n="history_date_label">ğŸ“… Date for history:</label>
                <input type="date" id="history-date">
                <button id="save-history-btn" class="btn btn-secondary" data-i18n="save_history">ğŸ’¾ Save to
                    History</button>
            </div>

            <button id="order-btn" class="btn btn-order" data-i18n="order_btn">ğŸ›’ Order Missing Items</button>
        </div>

        <!-- History Panel -->
        <div class="history-section">
            <h2 data-i18n="history_title">ğŸ“Š Fridge History</h2>
            <div id="history-list" class="history-list">
                <p class="loading" data-i18n="loading_history">Loading history...</p>
            </div>

            <div class="history-actions">
                <button id="analyze-history-btn" class="btn btn-primary" data-i18n="analyze_history">ğŸ§  Analyze History
                    with AI</button>
                <button id="clear-history-btn" class="btn btn-secondary" data-i18n="clear_history">ğŸ—‘ï¸ Clear All
                    History</button>
            </div>

            <!-- AI Suggestions -->
            <div id="ai-suggestions" class="ai-suggestions hidden">
                <h3 data-i18n="ai_suggestions_title">ğŸ¤– AI Suggestions</h3>

                <!-- AI Thinking Process -->
                <details id="ai-thinking-details" class="ai-thinking">
                    <summary data-i18n="ai_thinking_title">ğŸ§  AI Thinking Process</summary>
                    <div id="ai-thinking-content" class="ai-thinking-content"></div>
                </details>

                <ul id="suggestions-list"></ul>
                <button id="order-suggestions-btn" class="btn btn-order" data-i18n="order_suggestions">ğŸ›’ Order These
                    Items</button>
            </div>
        </div>

        <!-- Status -->
        <div id="status" class="status hidden"></div>
    </div>

    <!-- Confirmation Modal -->
    <div id="modal" class="modal hidden">
        <div class="modal-content">
            <h2 data-i18n="confirm_order">ğŸ›’ Confirm Order</h2>
            <p id="modal-confirm-text" data-i18n="confirm_text">Order the following items on Getir?</p>
            <ul id="modal-items"></ul>
            <div class="modal-actions">
                <button id="modal-cancel" class="btn btn-secondary" data-i18n="cancel">Cancel</button>
                <button id="modal-confirm" class="btn btn-primary" data-i18n="order_now">Order Now</button>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>

</html>